<div class="juego-container"
     [class.game-over]="juegoTerminado && !juegoActivo"
     [class.playing]="juegoActivo && !juegoTerminado">
  <header class="header" *ngIf="!juegoActivo && !juegoTerminado">
    <button class="menu-button" (click)="toggleSidebar()" aria-label="Abrir menú">
      <img src="/assets/Login/Home/menu-icon.svg" alt="Menú" class="menu-icon" />
    </button>
    <div class="header-content">
      <img src="/assets/Login/logo-marcas.png" alt="CARRERA DUCATI" class="logo-marcas" />
    </div>
    <div class="header-spacer"></div>
  </header>

  <!-- Barra gris después del header -->
  <div class="gray-bar-header" *ngIf="!juegoActivo && !juegoTerminado"></div>

  <app-sidebar [isOpen]="sidebarOpen" [isLoggedIn]="true" (closeSidebar)="closeSidebar()"></app-sidebar>

  <!-- Pantalla de selección de lentes -->
  <div *ngIf="!juegoActivo && !juegoTerminado" class="lentes-selection-screen">
    <main class="content">
      <!-- Sección NUEVO LOOK -->
      <div class="nuevo-look-section">
        <div class="title-section">
          <img src="/assets/Login/Menu/titulo-icon.png" alt="" class="title-shape" />
          <h1 class="title">NUEVO LOOK</h1>
        </div>
        <p class="nuevo-look-text">
          ¿Quieres tener una idea de cómo verías si usarás unos increíbles Carrera Ducati?
        </p>
      </div>

      <!-- Lista de lentes -->
      <div class="lentes-list">
        <!-- Lente 1 -->
        <div class="lente-item lente-item-1">
          <img 
            src="/assets/Juego/lentes-ducati-1.png" 
            srcset="/assets/Juego/lentes-ducati-1.png 1x, /assets/Juego/lentes-ducati-1@2x.png 2x"
            alt="Carrera Ducati 001" 
            class="lente-image" 
          />
          <p class="lente-code">CARDUC 001/S</p>
        </div>

        <!-- Lente 2 -->
        <div class="lente-item lente-item-2">
          <img 
            src="/assets/Juego/lentes-ducati-2.png" 
            srcset="/assets/Juego/lentes-ducati-2.png 1x, /assets/Juego/lentes-ducati-2@2x.png 2x"
            alt="Carrera Ducati 002" 
            class="lente-image" 
          />
          <p class="lente-code">CARDUC 002/S</p>
        </div>

        <!-- Lente 3 -->
        <div class="lente-item lente-item-3">
          <img 
            src="/assets/Juego/lentes-ducati-3.png" 
            srcset="/assets/Juego/lentes-ducati-3.png 1x, /assets/Juego/lentes-ducati-3@2x.png 2x"
            alt="Carrera Ducati 003" 
            class="lente-image" 
          />
          <p class="lente-code">CARDUC 003/S</p>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="action-buttons">
        <div class="action-button-wrapper">
          <button class="action-button skip-button" (click)="omitir()">OMITIR</button>
        </div>
        <div class="action-button-wrapper">
          <button class="action-button use-button" (click)="usarLentes()">USAR LENTES</button>
        </div>
      </div>
    </main>

    <!-- Banner rojo -->
    <div class="license-banner">
      <p>Ducati Motor Holding S.p.A. Official Licensed Product</p>
    </div>
  </div>

  <!-- Pantalla del juego -->
  <div *ngIf="juegoActivo && !juegoTerminado" class="game-screen-container" (click)="onGameScreenClick()">
    <img 
      src="/assets/Juego/juego-screen-1.png" 
      alt="Moto Rider Game" 
      class="game-image"
    />
  </div>

  <!-- Pantalla de juego terminado -->
  <div *ngIf="juegoTerminado && !juegoActivo" class="game-over-screen">
    <header class="header">
      <button class="menu-button" (click)="toggleSidebar()" aria-label="Abrir menú">
        <img src="/assets/Login/Home/menu-icon.svg" alt="Menú" class="menu-icon" />
      </button>
      <div class="header-content">
        <img src="/assets/Login/logo-marcas.png" alt="CARRERA DUCATI" class="logo-marcas" />
      </div>
      <div class="header-spacer"></div>
    </header>

    <div class="gray-bar-header"></div>

    <main class="game-over-content">
      <!-- Título con línea roja -->
      <div class="title-section">
        <img src="/assets/Login/Menu/titulo-icon.png" alt="" class="title-shape" />
        <h1 class="game-over-title">¡EXCELENTE CARRERA!</h1>
      </div>

      <!-- Rectángulo rojo -->
      <div class="red-rectangle"></div>

      <!-- Puntos obtenidos -->
      <div class="points-section">
        <p class="obtuviste-text">OBTUVISTE</p>
        <p class="points-value">{{ puntaje }}</p>
        <p class="points-label">puntos</p>
      </div>

      <!-- Texto motivacional -->
      <div class="motivational-text">
        <p class="motivational-text-content">
          Gracias por participar, acumula más puntos y gana una increíble <strong>Ducati Scrambler.</strong>
        </p>
      </div>

      <!-- Botón IR AL INICIO -->
      <div class="game-over-buttons">
        <button class="action-button primary narrow" (click)="volverAlInicio()">IR AL INICIO</button>
      </div>
    </main>
  </div>

  <app-footer *ngIf="!juegoActivo || juegoTerminado"></app-footer>
</div>

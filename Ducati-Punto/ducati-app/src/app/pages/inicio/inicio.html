<div class="inicio-container">
  <header class="header">
    <button class="menu-button" (click)="toggleSidebar()" aria-label="Abrir menú">
      <img src="/assets/Login/Home/menu-icon.svg" alt="Menú" class="menu-icon" />
    </button>
    <div class="header-content">
      <img src="/assets/Login/logo-marcas.png" alt="CARRERA DUCATI" class="logo-marcas" />
    </div>
    <div class="header-spacer"></div>
  </header>

  <!-- Barra gris después del header -->
  <div class="gray-bar-header"></div>

  <app-sidebar [isOpen]="sidebarOpen" [isLoggedIn]="true" (closeSidebar)="closeSidebar()"></app-sidebar>

  <!-- Banner promocional -->
  <div class="banner-section">
    <img 
      src="/assets/Login/Home/banner-img.png" 
      srcset="/assets/Login/Home/banner-img.png 1x, /assets/Login/Home/banner-img@2x.png 2x"
      alt="Ducati Scrambler" 
      class="banner-img" 
    />
  </div>

  <!-- Texto después del banner -->
  <div class="banner-text-section">
    <p class="banner-text-1">Conoce cómo ganar una</p>
    <p class="banner-text-2">Ducati Scrambler</p>
    <button class="saber-mas-button" (click)="saberMas()">
      <span class="saber-mas-text">SABER MÁS</span>
      <img src="/assets/Login/Home/flecha-icon.svg" alt="→" class="flecha-icon" />
    </button>
  </div>

  <!-- Barra gris después de SABER MÁS -->
  <div class="gray-bar-saber-mas"></div>

  <!-- Saludo al usuario -->
  <div class="greeting-section">
    <p class="greeting-hola">Hola</p>
    <p class="greeting-nombre">{{ nombreUsuario }}</p>
  </div>

  <!-- Registro de código -->
  <div class="code-register-section">
    <h3 class="section-title">REGISTRA TU CÓDIGO</h3>
    <div class="code-inputs">
      <input
        *ngFor="let digit of codigo; let i = index"
        type="text"
        [name]="'codigo-' + i"
        [(ngModel)]="codigo[i]"
        (input)="onCodeChange(i, $any($event.target).value)"
        (keydown)="onKeyDown($event, i)"
        class="code-input"
        maxlength="1"
        pattern="[0-9]"
      />
    </div>
    <div class="store-dropdown-container">
      <label class="store-label">Tienda de compra</label>
      <select [(ngModel)]="tiendaSeleccionada" name="tienda" class="store-dropdown">
        <option *ngFor="let tienda of tiendas" [value]="tienda">{{ tienda }}</option>
      </select>
      <img src="/assets/Login/Home/dropdown-Icon.svg" alt="▼" class="dropdown-icon" />
    </div>
    <button class="register-button" (click)="onRegisterCode()">REGISTRAR</button>
  </div>

  <!-- Puntaje y Ranking -->
  <div class="score-section">
    <div class="score-box">
      <p class="score-title">PUNTAJE</p>
      <p class="score-label">Haz acumulado</p>
      <p class="score-value">{{ puntaje }}</p>
      <p class="score-unit">puntos</p>
    </div>
    <div class="ranking-box">
      <p class="ranking-title">RANKING</p>
      <p class="ranking-label">Tu posición es</p>
      <p class="ranking-value">{{ posicion }}</p>
    </div>
  </div>

  <div class="codes-footer-wrapper">
    <!-- Tabla de códigos registrados -->
    <div class="codes-table-section">
      <h3 class="section-title">CÓDIGOS REGISTRADOS</h3>
      <div class="table-container">
        <table class="codes-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Código</th>
              <th>Puntos totales</th>
              <th>Puntos por código</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let codigo of codigosRegistrados">
              <td>{{ codigo.fecha }}</td>
              <td>{{ codigo.codigo }}</td>
              <td>{{ codigo.puntosTotales }}</td>
              <td>{{ codigo.puntosPorCodigo }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- Footer -->
    <app-footer></app-footer>
  </div>
</div>
